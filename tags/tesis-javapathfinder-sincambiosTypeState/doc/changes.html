<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type"
        content="text/html; charset=us-ascii" />

  <title>Changes</title>
  <link rel="stylesheet"
        type="text/css"
        media="screen"
        href="JPF_files/JPF-mod.css" />
  <base target="_blank" />
</head>

<body>
  <h1>Changes</h1>

  <hr>
  <h2>Version 4.0</h2>
  
  <p>This JPF version is a major rewrite - roughly the same size like JPF3, but with
  about 2/3 of the system changed, and substantial new functionality. Here are the rough
  numbers:</p>

  <table>
    <caption>Table 1: JPF4 statistics</caption>
    <tr>
      <th></th>
      <th align="right">src</th>
      <th align="right">ext</th>
      <th align="right">env</th>
      <th align="right">test</th>
      <th align="right">doc</th>
      <th align="right" width="40">&Sigma;</th>
    </tr>
    
    <tr>
      <th align="left">files</th>
      <td class="num">335</td>
      <td class="num">85</td>
      <td class="num">41</td>
      <td class="num">53</td>
      <td class="num">57</td>
      
      <td class="num">571</td>
    </tr>
    <tr>
      <th align="left">loc</th>
      <td class="num">39600</td>
      <td class="num">9528</td>
      <td class="num">4183</td>
      <td class="num">10141</td>
      <td class="num">(3840)</td>
      
      <td class="num">63452</td>
    </tr>
    <tr>
      <th align="left">classes</th>
      <td class="num">317</td>
      <td class="num">72</td>
      <td class="num">41</td>
      <td class="num">75</td>
      <td class="num">-</td>
      
      <td class="num">505</td>
    </tr>
    
  </table>  
  
  <p>The majority of the changes are in the core (<tt>gov.nasa.jpf.jvm.*</tt>) and
  extension (<tt>gov.nasa.jpf.abstraction</tt>) packages. While the regression test
  suite has been extended, the increase of loc is mainly due to an added test for
  large methods.</p>
  
  <table>
    <caption>Table 2: Change Statistics for JPF4</caption>
    <tr>
      <th></th>
      <th align="right">src</th>
      <th align="right">ext</th>
      <th align="right">env</th>
      <th align="right">test</th>
      <th align="right">doc</th>
      <th align="right" width="40">&Sigma;</th>
    </tr>
    
    <tr>
      <th align="left">files added</th>
      <td class="num">47</td>
      <td class="num">51</td>
      <td class="num">9</td>
      <td class="num">16</td>
      <td class="num">3</td>
      
      <td class="num">126</td>
    </tr>
    <tr>
      <th align="left">files deleted</th>
      <td class="num">45</td>
      <td class="num">0</td>
      <td class="num">3</td>
      <td class="num">0</td>
      <td class="num">3</td>

      <td class="num">51</td>
    </tr>
    <tr>
      <th>files modified</th>
      <td class="num">179</td>
      <td class="num">21</td>
      <td class="num">28</td>
      <td class="num">29</td>
      <td class="num">18</td>
      
      <td class="num">275</td>
    </tr>
    
  </table>
  
  <p>Here is a roadmap of what has and will be changed in JPF4. The majority of the implemented
  changes are related to the new execution engine. The focus of remaining changes in this version
  will be twofold: (a) the Eclipse plugin, and (b) state abstraction extensions.</p>
  
  <p class="big_diagram"><img src="JPF_files/JPF4-changes.png" /><br>
   JPF v4 changes</p>
  
  <p>Major improvements from a users perspective include:</p>
  <ul>
    <li>better support for Java 5.0, especially <tt>java.util.concurrent</tt>
    and <tt>java.lang.reflect</tt></li>
    <li>concurrent, backtrackable class initialization</li>
  </ul>
  
  
  <p>Here is a more detailed list of JPF4 changes from the developers point of view:</p>
  
  <h3>(1) Distribution</h3>
  <ul>
    <li>Subversion Repository</li>
    <li>build-tools now part of distribution</li>
    <li>documentation (web-site) part of distribution</li>
  </ul>

  <h3>(2) Functional Extensions</h3>
  <ul>
    <li>unified <a href="ChoiceGenerators.html" target="content">ChoiceGenerator</a>
    based execution scheme</li>
    <li>java.util.concurrent support (<tt>sun.misc.Unsafe</tt>)</li>
    <li>direct call infrastructure, enabling backtrackable JPF execution
    from listeners and/or NativePeers, but also better fidelity of
    static initialization (was atomic)</li>
    <li>(some) Method and Field reflection</li>
    <li>state abstraction extension</li>
    <li>symbolic execution</li>
  </ul>

  <h3>(3) Refactoring</h3>
  <ul>
    <li>use of Java 5 language extensions</li>
    <li>JUnit 4.1 based <a href="RegressionTests.html" target="content">
    regression tests</a> (caused Ant update)</li>
    <li>toplevel package abstraction removed (gov.nasa.jpf interfaces)</li>
    <li><tt>gov.nasa.jpf.util.Debug</tt> replaced with <tt>java.util.logging</tt>
    based system</li>
    <li>script-less build/launch</li>  
  </ul>
  

</body>
</html>
